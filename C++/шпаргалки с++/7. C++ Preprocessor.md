## –ß—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –≤ C++?

**–ü—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä** ‚Äî —ç—Ç–æ —Å—Ç–∞–¥–∏—è **–¥–æ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**.  
–û–Ω **–Ω–µ –∑–Ω–∞–µ—Ç –Ω–∏—á–µ–≥–æ** –ø—Ä–æ —Ç–∏–ø—ã, –∫–ª–∞—Å—Å—ã, —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî –æ–Ω –ø—Ä–æ—Å—Ç–æ **—Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫**.

–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–∞–∫–∞—è:

```c++
.cpp  
‚Üì (preprocessor) 
.i   ‚Üê —Ç—É—Ç —É–∂–µ –Ω–µ—Ç #include / #define  
‚Üì (compiler) 
.o
```

# Preprocessor


| [if](https://en.cppreference.com/w/cpp/preprocessor/conditional)                                       | [elif](https://en.cppreference.com/w/cpp/preprocessor/conditional)                                     |
| ------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------ |
| [else](https://en.cppreference.com/w/cpp/preprocessor/conditional)                                     | [endif](https://en.cppreference.com/w/cpp/preprocessor/conditional)                                    |
| - [ifdef](https://en.cppreference.com/w/cpp/preprocessor/conditional)                                  | - [ifndef](https://en.cppreference.com/w/cpp/preprocessor/conditional)                                 |
| - [define](https://en.cppreference.com/w/cpp/preprocessor/replace)                                     | - [undef](https://en.cppreference.com/w/cpp/preprocessor/replace)                                      |
| - [include](https://en.cppreference.com/w/cpp/preprocessor/include)                                    | - [line](https://en.cppreference.com/w/cpp/preprocessor/line)                                          |
| - [error](https://en.cppreference.com/w/cpp/preprocessor/error)                                        | - [pragma](https://en.cppreference.com/w/cpp/preprocessor/impl)                                        |
| - [defined](https://en.cppreference.com/w/cpp/preprocessor/conditional)                                | - [__has_include](https://en.cppreference.com/w/cpp/feature_test)                                      |
| - [__has_cpp_attribute](https://en.cppreference.com/w/cpp/feature_test)                                | - [export](https://en.cppreference.com/w/cpp/keyword/export)                                           |
| - [import](https://en.cppreference.com/mwiki/index.php?title=cpp/keyword/import&action=edit&redlink=1) | - [module](https://en.cppreference.com/mwiki/index.php?title=cpp/keyword/module&action=edit&redlink=1) |
# Includes ‚Äî –≤—Å—Ç–∞–≤–∫–∞ –∫–æ–¥–∞

```c++
#include "iostream"
#include <iostream>
```

–§–∞–∫—Ç–∏—á–µ—Å–∫–∏:

`// –ø—Ä–æ—Å—Ç–æ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç —Ñ–∞–π–ª–∞`

>üìå `< >` ‚Äî –∏—â–µ—Ç –≤ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—É—Ç—è—Ö
>üìå `" "` ‚Äî —Å–Ω–∞—á–∞–ª–∞ –∏—â–µ—Ç —Ä—è–¥–æ–º —Å —Ñ–∞–π–ª–æ–º

# Defines

```c++
#define FOO
#define FOO "hello"

#undef FOO
```
```c++
#define PI 3.14159
#define MAX_SIZE 100
```

> ‚ö†Ô∏è –≠—Ç–æ **–Ω–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**, –∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞.

# If

```c++
#ifdef DEBUG
  console.log('hi');
#elif defined VERBOSE
  ...
#else
  ...
#endif
```

# Error

```c++
#if VERSION == 2.0
  #error Unsupported
  #warning Not really supported
#endif
```

# Macro

```c++
#define DEG(x) ((x) * 57.29)
```
```c++
#define SQR(x) ((x) * (x))
```
```c++
int a = SQR(5 + 1); // ((5 + 1) * (5 + 1))
```
‚ö†Ô∏è –ë–µ–∑ —Å–∫–æ–±–æ–∫ –±—É–¥–µ—Ç –∞–¥:
```c++
#define SQR(x) x*x
SQR(5+1) // 5 + 1 * 5 + 1 = 11 ‚ùå
```
üí° –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º C++ **–ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –ª—É—á—à–µ**:
```c++
template<typename T>
T sqr(T x) { return x * x; }
```
### `#undef`

–£–¥–∞–ª—è–µ—Ç –º–∞–∫—Ä–æ—Å:

```c++
#define A 10 
#undef A
```

# Token concat

```c++
#define DST(name) name##_s name##_t
DST(object);   #=> object_s object_t;
```

# Stringification

```c++
#define STR(name) #name
char * a = STR(object);   #=> char * a = "object";
```

# –ö—Ä–∞—Ç–∫–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞

|–û–ø–µ—Ä–∞—Ç–æ—Ä|–ß—Ç–æ –¥–µ–ª–∞–µ—Ç|
|---|---|
|`#`|–ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç –≤ —Å—Ç—Ä–æ–∫—É|
|`##`|—Å–∫–ª–µ–∏–≤–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã|
|—ç—Ç–∞–ø|**–¥–æ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**|

# file and line
```c++
#define LOG(msg) console.log(__FILE__, __LINE__, msg)
#=> console.log("file.txt", 3, "hey")
```


# üß© C++ Preprocessor ‚Äî Cheat Sheet

---

### üìå `#include`

```cpp
#include <iostream>   // —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
#include "my.h"       // –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
```

‚û°Ô∏è –¢–µ–∫—Å—Ç–æ–≤–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–∞–π–ª–∞

---

### üìå `#define` ‚Äî –º–∞–∫—Ä–æ—Å—ã

#### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã

```cpp
#define PI 3.14
#define MAX 100
```

‚ö†Ô∏è –ù–µ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–æ

---

#### –ú–∞–∫—Ä–æ—Å—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

```cpp
#define SQR(x) ((x)*(x))
#define MAX(a,b) ((a) > (b) ? (a) : (b))
```

‚ö†Ô∏è –í—Å–µ–≥–¥–∞ —Å—Ç–∞–≤—å —Å–∫–æ–±–∫–∏

---

#### –ú–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–µ –º–∞–∫—Ä–æ—Å—ã

```cpp
#define LOG(x) \
    std::cout << x << std::endl;
```

---

### üìå `#undef`

```cpp
#undef PI
```

---

### üìå –£—Å–ª–æ–≤–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è

```cpp
#ifdef DEBUG
#endif

#ifndef NDEBUG
#endif

#if VERSION >= 2
#elif VERSION == 1
#else
#endif
```

---

### üìå Include guards

#### –ö–ª–∞—Å—Å–∏–∫–∞

```cpp
#ifndef FILE_H
#define FILE_H
// –∫–æ–¥
#endif
```

#### –°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

```cpp
#pragma once
```

---

### üìå –ü—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –º–∞–∫—Ä–æ—Å—ã

```cpp
__FILE__    // –∏–º—è —Ñ–∞–π–ª–∞
__LINE__    // –Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏
__DATE__    // –¥–∞—Ç–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
__TIME__    // –≤—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
__func__    // –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏ (C++11)
```

---

### üìå –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã / –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—ã

```cpp
#ifdef _WIN32
#ifdef __linux__
#ifdef __APPLE__
#ifdef __GNUC__
#ifdef _MSC_VER
```

---

### üìå `#pragma`

```cpp
#pragma once
#pragma pack(push, 1)
#pragma pack(pop)
```

‚ö†Ô∏è –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞

---

### üìå –û–ø–µ—Ä–∞—Ç–æ—Ä `#` (stringify)

```cpp
#define STR(x) #x
STR(test) // "test"
```

---

### üìå –û–ø–µ—Ä–∞—Ç–æ—Ä `##` (concat)

```cpp
#define CAT(a,b) a##b
CAT(var, 1) // var1
```

---

### üìå Debug –ª–æ–≥

```cpp
#ifdef DEBUG
#define LOG(x) std::cout << x << std::endl
#else
#define LOG(x)
#endif
```

---

## üö´ –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã

```cpp
#define true 1
#define min(a,b) a<b?a:b
#define for for(;;)
```

‚ùå –ù–µ—Ç —Ç–∏–ø–æ–≤  
‚ùå –ü–ª–æ—Ö–∞—è –æ—Ç–ª–∞–¥–∫–∞  
‚ùå –ù–µ —É–≤–∞–∂–∞—é—Ç scope

---

## ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã

|–ü—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä|–ù–æ—Ä–º–∞–ª—å–Ω–æ –≤ C++|
|---|---|
|`#define PI`|`constexpr double PI`|
|`#define MAX`|`std::max`|
|`#define FLAG`|`enum class`|
|`#define FUNC`|`inline / template`|

---

## üß† –ó–∞–ø–æ–º–Ω–∏—Ç—å –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π

> **–ü—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä ‚Äî —Ç—É–ø–æ–π, –±—ã—Å—Ç—Ä—ã–π –∏ –æ–ø–∞—Å–Ω—ã–π**

–ò—Å–ø–æ–ª—å–∑—É–π **–º–∏–Ω–∏–º–∞–ª—å–Ω–æ –∏ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ**.
