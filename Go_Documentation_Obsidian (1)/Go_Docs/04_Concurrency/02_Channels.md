---
tags: [golang, concurrency, channel]
aliases: [Go –ö–∞–Ω–∞–ª—ã, Go CSP]
---

# üì§ –ö–∞–Ω–∞–ª—ã (Channels)

–ö–∞–Ω–∞–ª—ã ‚Äî —ç—Ç–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω–≤–µ–π–µ—Ä—ã, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏ –ø–æ–ª—É—á–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –º–µ–∂–¥—É –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏.

## 1. –°–æ–∑–¥–∞–Ω–∏–µ –ö–∞–Ω–∞–ª–∞

–ö–∞–Ω–∞–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `make`.

```go
// –ù–µ–±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª (–±–ª–æ–∫–∏—Ä—É—é—â–∏–π)
ch := make(chan int)

// –ë—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª (–±—É—Ñ–µ—Ä –Ω–∞ 100 –∑–Ω–∞—á–µ–Ω–∏–π)
chBuf := make(chan int, 100)
```

## 2. –û—Ç–ø—Ä–∞–≤–∫–∞ –∏ –ü–æ–ª—É—á–µ–Ω–∏–µ

| –û–ø–µ—Ä–∞—Ü–∏—è | –°–∏–Ω—Ç–∞–∫—Å–∏—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| **–û—Ç–ø—Ä–∞–≤–∫–∞** | `ch <- value` | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª. |
| **–ü–æ–ª—É—á–µ–Ω–∏–µ** | `value := <-ch` | –ü–æ–ª—É—á–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞. |

### –ù–µ–±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ö–∞–Ω–∞–ª—ã

–û—Ç–ø—Ä–∞–≤–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ **–±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è** –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –¥—Ä—É–≥–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –Ω–µ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é.

```go
func sum(s []int, c chan int) {
	sum := 0
	for _, v := range s {
		sum += v
	}
	c <- sum // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—É–º–º—ã –≤ –∫–∞–Ω–∞–ª c
}

func main() {
	s := []int{7, 2, 8, -9, 4, 0}
	c := make(chan int)

	go sum(s[:len(s)/2], c)
	go sum(s[len(s)/2:], c)

	// –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ –∫–∞–Ω–∞–ª–∞. –ë–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è.
	x, y := <-c, <-c
	fmt.Println(x, y, x+y)
}
```

### –ë—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ö–∞–Ω–∞–ª—ã

–ë—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –ø—Ä–∏–Ω–∏–º–∞—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ –∑–Ω–∞—á–µ–Ω–∏–π –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.

```go
ch := make(chan int, 2) // –ë—É—Ñ–µ—Ä –Ω–∞ 2
ch <- 1 // –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
ch <- 2 // –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
// ch <- 3 // –ë–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, –ø–æ–∫–∞ –Ω–µ –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ
fmt.Println(<-ch) // 1
```

## 3. –ó–∞–∫—Ä—ã—Ç–∏–µ –∏ –ò—Ç–µ—Ä–∞—Ü–∏—è

### –ó–∞–∫—Ä—ã—Ç–∏–µ –ö–∞–Ω–∞–ª–∞

–ö–∞–Ω–∞–ª –º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `close()`. –ó–∞–∫—Ä—ã–≤–∞—Ç—å –∫–∞–Ω–∞–ª –¥–æ–ª–∂–µ–Ω —Ç–æ–ª—å–∫–æ **–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å**.

```go
close(ch)
```

### –ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ –ö–∞–Ω–∞–ª—É

–¶–∏–∫–ª `for range` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ –∫–∞–Ω–∞–ª–∞ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –æ–Ω –Ω–µ –±—É–¥–µ—Ç –∑–∞–∫—Ä—ã—Ç.

```go
func fibonacci(n int, c chan int) {
	x, y := 0, 1
	for i := 0; i < n; i++ {
		c <- x
		x, y = y, x+y
	}
	close(c) // –ó–∞–∫—Ä—ã–≤–∞–µ–º –∫–∞–Ω–∞–ª, –∫–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
}

func main() {
	c := make(chan int, 10)
	go fibonacci(cap(c), c)
	
	// –¶–∏–∫–ª for range –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è, –ø–æ–∫–∞ –∫–∞–Ω–∞–ª –Ω–µ –±—É–¥–µ—Ç –∑–∞–∫—Ä—ã—Ç
	for i := range c {
		fmt.Println(i)
	}
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ó–∞–∫—Ä—ã—Ç–∏—è

–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∫–∞–Ω–∞–ª–∞ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –±—ã–ª –ª–∏ –æ–Ω –∑–∞–∫—Ä—ã—Ç, –∏—Å–ø–æ–ª—å–∑—É—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Å –¥–≤—É–º—è –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.

```go
v, ok := <-ch
// ok == true, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –±—ã–ª–æ –ø–æ–ª—É—á–µ–Ω–æ
// ok == false, –µ—Å–ª–∏ –∫–∞–Ω–∞–ª –∑–∞–∫—Ä—ã—Ç –∏ –±—É—Ñ–µ—Ä –ø—É—Å—Ç
```
