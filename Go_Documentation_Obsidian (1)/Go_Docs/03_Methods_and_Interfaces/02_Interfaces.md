---
tags: [golang, interfaces, polymorphism]
aliases: [Go –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, Go –ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º]
---

# üîó –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ Go ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º–∞.

## 1. –ß—Ç–æ –¢–∞–∫–æ–µ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä —Å–∏–≥–Ω–∞—Ç—É—Ä –º–µ—Ç–æ–¥–æ–≤. –¢–∏–ø **–Ω–µ—è–≤–Ω–æ** —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –µ—Å–ª–∏ –æ–Ω —Ä–µ–∞–ª–∏–∑—É–µ—Ç –≤—Å–µ –º–µ—Ç–æ–¥—ã, –æ–±—ä—è–≤–ª–µ–Ω–Ω—ã–µ –≤ —ç—Ç–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.

```go
// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Abser –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ–¥–∏–Ω –º–µ—Ç–æ–¥: Abs()
type Abser interface {
	Abs() float64
}

type MyFloat float64
type Vertex struct { X, Y float64 }

// MyFloat —Ä–µ–∞–ª–∏–∑—É–µ—Ç Abser
func (f MyFloat) Abs() float64 {
	if f < 0 {
		return float64(-f)
	}
	return float64(f)
}

// *Vertex —Ä–µ–∞–ª–∏–∑—É–µ—Ç Abser
func (v *Vertex) Abs() float64 {
	return math.Sqrt(v.X*v.X + v.Y*v.Y)
}

func main() {
	var a Abser // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Ç–∏–ø–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
	
	f := MyFloat(-math.Sqrt2)
	v := Vertex{3, 4}
	
	a = f    // OK: MyFloat —Ä–µ–∞–ª–∏–∑—É–µ—Ç Abser
	a = &v   // OK: *Vertex —Ä–µ–∞–ª–∏–∑—É–µ—Ç Abser
	
	fmt.Println(a.Abs())
}
```

## 2. –ü—É—Å—Ç–æ–π –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å (`interface{}` –∏–ª–∏ `any`)

–ü—É—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (`interface{}`) –∏–ª–∏ –µ–≥–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø—Å–µ–≤–¥–æ–Ω–∏–º (`any`) –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ **–ª—é–±–æ–≥–æ —Ç–∏–ø–∞**.

```go
var i interface{}
i = 42
i = "hello"
```

## 3. –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¢–∏–ø–∞ (Type Assertion)

–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç–∏–ø–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –±–∞–∑–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

```go
var i interface{} = "hello"

// –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, —á—Ç–æ i —Å–æ–¥–µ—Ä–∂–∏—Ç string
s := i.(string)
fmt.Println(s) // hello

// "–ó–∞—â–∏—â–µ–Ω–Ω–æ–µ" —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π
s, ok := i.(string)
if ok {
	fmt.Println("i is a string:", s)
}

// –ï—Å–ª–∏ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–µ–≤–µ—Ä–Ω–æ, –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ø–∞–Ω–∏–∫–∞
// f := i.(float64) // –ü–∞–Ω–∏–∫–∞!
```

## 4. –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –¢–∏–ø–∞ (Type Switch)

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ –∑–Ω–∞—á–µ–Ω–∏—è, —Ö—Ä–∞–Ω—è—â–µ–≥–æ—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.

```go
func do(i interface{}) {
	switch v := i.(type) {
	case int:
		fmt.Printf("–£–¥–≤–æ–µ–Ω–Ω–æ–µ %v —ç—Ç–æ %v\n", v, v*2)
	case string:
		fmt.Printf("%q –∏–º–µ–µ—Ç –¥–ª–∏–Ω—É %v –±–∞–π—Ç\n", v, len(v))
	default:
		fmt.Printf("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø %T!\n", v)
	}
}
```

## 5. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `error`

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `error` ‚Äî —ç—Ç–æ –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –≤ Go.

```go
type error interface {
	Error() string
}
```

–õ—é–±–æ–π —Ç–∏–ø, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –º–µ—Ç–æ–¥ `Error() string`, –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—à–∏–±–∫–∏.
