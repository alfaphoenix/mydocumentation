---
tags: [golang, concurrency, select]
aliases: [Go Select, Go –ú—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ]
---

# üîÄ `select`

–û–ø–µ—Ä–∞—Ç–æ—Ä `select` –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥–æ—Ä—É—Ç–∏–Ω–µ –∂–¥–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞–Ω–∞–ª–∞—Ö. –û–Ω –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –æ–¥–∏–Ω –∏–∑ `case` –Ω–µ —Å–º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω.

## 1. –ë–∞–∑–æ–≤—ã–π `select`

```go
select {
case v := <-ch1:
	// –ü–æ–ª—É—á–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ ch1
case v := <-ch2:
	// –ü–æ–ª—É—á–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ ch2
default:
	// –ù–∏ –æ–¥–∏–Ω –∫–∞–Ω–∞–ª –Ω–µ –≥–æ—Ç–æ–≤ (–Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è)
}
```

### –ü—Ä–∞–≤–∏–ª–∞ –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1.  **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** `select` –∂–¥–µ—Ç, –ø–æ–∫–∞ –æ–¥–∏–Ω –∏–∑ –∫–∞–Ω–∞–ª–æ–≤ –Ω–µ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ –∏–ª–∏ –ø–æ–ª—É—á–µ–Ω–∏—é.
2.  **–°–ª—É—á–∞–π–Ω—ã–π –í—ã–±–æ—Ä:** –ï—Å–ª–∏ –≥–æ—Ç–æ–≤—ã –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞–Ω–∞–ª–æ–≤, `select` –≤—ã–±–∏—Ä–∞–µ—Ç –æ–¥–∏–Ω –∏–∑ –Ω–∏—Ö **—Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º**.
3.  **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞:** –ï—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω –∫–∞–Ω–∞–ª –Ω–µ –≥–æ—Ç–æ–≤ –∏ –Ω–µ—Ç `default`, `select` **–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è** –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –æ–¥–∏–Ω –∏–∑ –∫–∞–Ω–∞–ª–æ–≤ –Ω–µ —Å—Ç–∞–Ω–µ—Ç –≥–æ—Ç–æ–≤.

## 2. –¢–∞–π–º–∞—É—Ç—ã

`select` —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–∞–π–º–∞—É—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—è –∫–∞–Ω–∞–ª, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π `time.After`.

```go
func main() {
	ch := make(chan string)
	go func() {
		time.Sleep(2 * time.Second)
		ch <- "result"
	}()

	select {
	case res := <-ch:
		fmt.Println(res)
	case <-time.After(1 * time.Second):
		fmt.Println("timeout") // –í—ã–ø–æ–ª–Ω–∏—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ 1 —Å–µ–∫—É–Ω–¥–∞ < 2 —Å–µ–∫—É–Ω–¥—ã
	}
}
```

## 3. –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π `select`

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `default` –¥–µ–ª–∞–µ—Ç `select` –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–º.

```go
select {
case msg := <-messages:
	fmt.Println("received message", msg)
default:
	fmt.Println("no message received") // –í—ã–ø–æ–ª–Ω–∏—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ, –µ—Å–ª–∏ –∫–∞–Ω–∞–ª –ø—É—Å—Ç
}
```

## 4. `select` –∏ –ó–∞–∫—Ä—ã—Ç–∏–µ –ö–∞–Ω–∞–ª–∞

–ï—Å–ª–∏ –∑–∞–∫—Ä—ã—Ç—ã–π –∫–∞–Ω–∞–ª –≥–æ—Ç–æ–≤ –∫ –ø–æ–ª—É—á–µ–Ω–∏—é, `case` –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω, –∏ –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω–æ –Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∏–ø–∞ –∫–∞–Ω–∞–ª–∞ —Å `ok=false`.

```go
ch := make(chan int)
close(ch)

select {
case v, ok := <-ch:
	if !ok {
		fmt.Println("channel closed") // –í—ã–ø–æ–ª–Ω–∏—Ç—Å—è
	}
	// ...
}
```
